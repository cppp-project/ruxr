name: ğŸ“„ Generate licenses-data.

steps:
  - name: ğŸ“ Create licenses-data directory.
    mkdir: public/licenses-data

  - name: ğŸ“„ Find licenses metadata files.
    glob: "3rd-party/license-list-data/json/details/*.json"
    save-to: licenses-meta-files

  - name: ğŸ› ï¸ Copy and trim JSON files.
    matrix:
      file: ${{ licenses-meta-files }}
    steps:
      - name: ğŸ› ï¸ Build JSON file for ${{ file }}.
        run:
          [
            "${{ python }}",
            ".rubisco/licenses-meta.py",
            "${{ file }}",
            "3rd-party/license-list-data/html/$&{{ file.stem }}.html",
            "public/licenses-data/$&{{ file.stem }}.json",
          ]
